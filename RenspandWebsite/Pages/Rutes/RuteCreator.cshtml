@page
@model RenspandWebsite.Pages.rute.RuteCreatorModel
@{
    ViewData["Title"] = "Rute Creator";
}

<h2>Rute Creator</h2>

<form method="post">
    <h4>Select Orders for Rute:</h4>
    <ul>
        @foreach (var order in Model.AllOrders)
        {
            <li>
                <input type="checkbox" name="SelectedOrderIds" value="@order.Id" />
                Order #@order.Id - @order.Buyer?.Name, @order.AddressItems.FirstOrDefault()?.Address?.Street
            </li>
        }
    </ul>
    <button type="submit" asp-page-handler="GenerateRute">Generate Rute</button>
</form>

@if (Model.GeneratedRute != null)
{
    <h4>Generated Rute (ID: @Model.GeneratedRute.Id)</h4>
    <ul>
        @foreach (var order in Model.GeneratedRute.Orders)
        {
            <li>Order #@order.Id - @order.Buyer?.Name, @order.AddressItems.FirstOrDefault()?.Address?.Street</li>
        }
    </ul>

    <form method="post">
        @foreach (var id in Model.SelectedOrderIds)
        {
            <input type="hidden" name="SelectedOrderIds" value="@id" />
        }
        <button type="submit" asp-page-handler="AcceptRute">Accept Rute</button>
    </form>
}
